<html lang="en">
<head>
    <title>Generate QR code</title>
    <script src="https://unpkg.com/@bitjson/qr-code@1.0.2/dist/qr-code.js"></script>
    <style>
        div, input, table {
            margin: 12px 8px
        }
        table {
            border: 1px dashed
        }
        td {
            padding: 2px 4px;
            vertical-align: text-bottom;
        }
        #qr-code {
            width: 250px;
            height: 250px;
            margin: 2em auto;
            background-color: #fff;
        }
    </style>
</head>
<body>
<h1>Generate QR code</h1>
<p>Using <a href="https://github.com/bitjson/qr-code">qr-code</a>, trollface from <a href="https://github.com/MyNameIsTroll/trollfaces">MyNameIsTroll</a> </p>
<table>
    <tr>
        <td>
            <label for="qr-text">QR text</label>
        </td>
        <td>
            <input type="text" id="qr-text" value="LOL">
        </td>
    </tr>
    <tr>
        <td>
            <label for="qr-image-input">Image url</label>
        </td>
        <td>
            <input type="text" id="qr-image-input" value="trollface.svg">
        </td>
    </tr>
    <tr>
        <td>
            <label for="qr-size-slider">Size</label>
        </td>
        <td>
            <input type="range" id="qr-size-slider" min="100" max="2000" value="250"/>
            <input type="number" id="qr-size-input" min="100" max="2000" value="250"/>
        </td>
    </tr>
    <tr>
        <td>
            <label for="qr-module-color-selector">Module color</label>
        </td>
        <td>
            <input type="color" id="qr-module-color-selector" value="#000000"/>
        </td>
    </tr>
    <tr>
        <td>
            <label for="qr-position-ring-color-selector">Position ring color</label>
        </td>
        <td>
            <input type="color" id="qr-position-ring-color-selector" value="#888888"/>
        </td>
    </tr>
    <tr>
        <td>
            <label for="qr-position-center-color-selector">Position center color</label>
        </td>
        <td>
            <input type="color" id="qr-position-center-color-selector" value="#BBBBBB"/>
        </td>
    </tr>    <tr>
        <td>
            <label for="qr-background-color-selector">Background color</label>
        </td>
        <td>
            <input type="color" id="qr-background-color-selector" value="#FFFFFF"/>
        </td>
    </tr>
</table>
<qr-code
        id="qr-code"
        contents="LOL"
        module-color="#000000"
        position-ring-color="#888"
        position-center-color="#BBB"
        mask-x-to-y-ratio="1.2">
    <img
        src="trollface.svg"
        id="qr-code-image"
        slot="icon"
        width="50px"
    />
</qr-code>
<script type="text/javascript">
  const element = {
    qrCode: document.getElementById('qr-code'),
    qrCodeImage: document.getElementById('qr-code-image'),
    qrCodeImageInput: document.getElementById('qr-image-input'),
    qrTextInput: document.getElementById('qr-text'),
    qrSizeSliderInput: document.getElementById('qr-size-slider'),
    qrSizeInput: document.getElementById('qr-size-input'),
    qrModuleColorSelector: document.getElementById('qr-module-color-selector'),
    qrPositionRingColorSelector: document.getElementById('qr-position-ring-color-selector'),
    qrPositionCenterColorSelector: document.getElementById('qr-position-center-color-selector'),
    qrBackgroundColorSelector: document.getElementById('qr-background-color-selector'),
  }

  element.qrTextInput.addEventListener('input', el => element.qrCode.contents = el.target.value)
  element.qrCodeImageInput.addEventListener('input', el => element.qrCodeImage.src = el.target.value)
  element.qrModuleColorSelector.addEventListener('input', el => element.qrCode.moduleColor = el.target.value)
  element.qrPositionRingColorSelector.addEventListener('input', el => element.qrCode.positionRingColor = el.target.value)
  element.qrPositionCenterColorSelector.addEventListener('input', el => element.qrCode.positionCenterColor = el.target.value)
  element.qrBackgroundColorSelector.addEventListener('input', el => element.qrCode.style.backgroundColor = el.target.value)

  element.qrSizeSliderInput.addEventListener('input', el => {
    const val = Number.parseInt(el.target.value)
    element.qrSizeInput.value = val
    element.qrCode.style.width = val
    element.qrCode.style.height = val
    element.qrCodeImage.style.width = Math.round(val / 5)
  })
  element.qrSizeInput.addEventListener('input', el => {
    const val = Number.parseInt(el.target.value)
    element.qrSizeSliderInput.value = val
    element.qrCode.style.width = val
    element.qrCode.style.height = val
    element.qrCodeImage.width = Math.round(val / 5)
  })
</script>
</body>
</html>
